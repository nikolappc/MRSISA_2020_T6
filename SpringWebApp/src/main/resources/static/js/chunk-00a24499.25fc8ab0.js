(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-00a24499"],{"2a7f":function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a("71d9"),l=a("80d2"),o=Object(l["i"])("v-toolbar__title"),r=Object(l["i"])("v-toolbar__items");n["a"]},"874c":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h2",[e._v("Lista sala")]),a("v-text-field",{attrs:{label:"Pretraga","append-icon":"mdi-magnify"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("v-simple-table",{attrs:{border:"1"}},[a("thead",[a("th",[e._v("ID")]),a("th",[e._v("Naziv")]),a("th")]),a("tbody",[e._l(e.filterSale,(function(t){return a("Sala",{key:t.id,attrs:{sala:t.sala,termini:t.posete},on:{click:function(t){e.dialog=!0},"del-sala":e.deleteSala,otvori:e.otvoriDialog}})})),a("v-dialog",{attrs:{"max-width":"290"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}})],2),a("tr",[a("td",{attrs:{align:"right",colspan:"4"}},[a("v-btn",{staticClass:"blue",attrs:{slot:"action",to:{path:"sala/add"},dark:"",medium:"",left:""},slot:"action"},[e._v("Dodaj salu")])],1)])]),null!=e.pregled.lekar?a("v-select",{attrs:{items:e.lekari,label:"Lekar",dense:"",outlined:"","return-object":""},scopedSlots:e._u([{key:"selection",fn:function(t){return[e._v(" "+e._s(t.item.ime)+" "+e._s(t.item.prezime)+" ")]}},{key:"item",fn:function(t){return[e._v(" "+e._s(t.item.ime)+" "+e._s(t.item.prezime)+" ")]}}],null,!1,3924163644),model:{value:e.pregled.lekar,callback:function(t){e.$set(e.pregled,"lekar",t)},expression:"pregled.lekar"}}):e._e(),a("v-dialog",{attrs:{"max-width":"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("Izmeni salu")]),a("IzmenaSale",{attrs:{sala:e.dialogSala},on:{zatvori:function(t){e.dialog=!1}}})],1)],1)],1)},l=[],o=(a("4de4"),a("7db0"),a("ac1f"),a("466d"),a("841c"),a("5530")),r=a("b85c"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("tr",[a("td",{on:{click:e.otvoriDialog}},[e._v(e._s(e.sala.id))]),a("td",{on:{click:e.otvoriDialog}},[e._v(e._s(e.sala.naziv))]),a("td",[a("v-btn",{on:{click:function(t){e.dialog=!0}}},[e._v("Kalendar")])],1),a("v-dialog",{attrs:{"max-width":"600"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("Kalendar",{attrs:{events:e.termini}})],1)],1),a("td",[a("v-btn",{attrs:{icon:""},on:{click:e.deleteSala}},[a("v-icon",[e._v("mdi-delete")])],1)],1)],1)},s=[],c=a("bc3a"),d=a.n(c),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{staticClass:"fill-height"},[a("v-col",[a("v-sheet",{attrs:{height:"64"}},[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-btn",{staticClass:"mr-4",attrs:{outlined:"",color:"grey darken-2"},on:{click:e.setToday}},[e._v(" Danas ")]),a("v-btn",{attrs:{fab:"",text:"",small:"",color:"grey darken-2"},on:{click:e.prev}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-chevron-left")])],1),a("v-btn",{attrs:{fab:"",text:"",small:"",color:"grey darken-2"},on:{click:e.next}},[a("v-icon",{attrs:{small:""}},[e._v("mdi-chevron-right")])],1),a("v-toolbar-title",[e._v(e._s(e.title))]),a("v-spacer")],1)],1),a("v-sheet",{attrs:{height:"600"}},[a("v-calendar",{ref:"calendar",attrs:{color:"primary",events:e.events,"event-color":e.getEventColor,now:e.today,type:e.type},on:{"click:event":e.showEvent,change:e.updateRange},model:{value:e.focus,callback:function(t){e.focus=t},expression:"focus"}}),a("v-menu",{attrs:{"close-on-content-click":!1,activator:e.selectedElement,"offset-x":""},model:{value:e.selectedOpen,callback:function(t){e.selectedOpen=t},expression:"selectedOpen"}},[a("v-card",{attrs:{color:"grey lighten-4","min-width":"350px",flat:""}},[a("v-toolbar",{attrs:{color:e.selectedEvent.color,dark:""}},[a("v-toolbar-title",{domProps:{innerHTML:e._s(e.selectedEvent.name)}})],1),a("v-card-text",[a("span",{domProps:{innerHTML:e._s(e.selectedEvent.details)}})]),a("v-card-actions",[a("v-btn",{attrs:{text:"",color:"secondary"},on:{click:function(t){e.selectedOpen=!1}}},[e._v(" Zatvori ")])],1)],1)],1)],1)],1)],1)},v=[],f=(a("99af"),a("4d90"),{data:function(){return{focus:"",type:"month",start:null,end:null,selectedEvent:{},selectedElement:null,selectedOpen:!1}},props:["events"],computed:{title:function(){var e=this.start,t=this.end;if(!e||!t)return"";var a=this.monthFormatter(e),n=e.year;return"".concat(a," ").concat(n)},monthFormatter:function(){return this.$refs.calendar.getFormatter({timeZone:"UTC",month:"long"})}},mounted:function(){this.$refs.calendar.checkChange();var e=new Date,t=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0"),n=e.getFullYear();this.today=n+"-"+a+"-"+t},methods:{getEventColor:function(){return"green"},setToday:function(){this.focus=this.today},prev:function(){this.$refs.calendar.prev()},next:function(){this.$refs.calendar.next()},showEvent:function(e){var t=this,a=e.nativeEvent,n=e.event,l=function(){t.selectedEvent=n,t.selectedElement=a.target,setTimeout((function(){return t.selectedOpen=!0}),10)};this.selectedOpen?(this.selectedOpen=!1,setTimeout(l,10)):l(),a.stopPropagation()},updateRange:function(e){var t=e.start,a=e.end;this.start=t,this.end=a},formatDate:function(e,t){return t?"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate()," ").concat(e.getHours(),":").concat(e.getMinutes()):"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate())}}}),m=f,h=a("2877"),p=a("6544"),g=a.n(p),k=a("8336"),b=a("a4f6"),_=a("b0af"),x=a("99d9"),z=a("62ad"),S=a("132d"),V=a("e449"),y=a("0fd9"),$=a("8dd9"),j=a("2fa4"),O=a("71d9"),T=a("2a7f"),w=Object(h["a"])(m,u,v,!1,null,null,null),C=w.exports;g()(w,{VBtn:k["a"],VCalendar:b["a"],VCard:_["a"],VCardActions:x["a"],VCardText:x["b"],VCol:z["a"],VIcon:S["a"],VMenu:V["a"],VRow:y["a"],VSheet:$["a"],VSpacer:j["a"],VToolbar:O["a"],VToolbarTitle:T["a"]});var D={data:function(){return{dialog:!1}},props:["sala","termini"],methods:{deleteSala:function(){var e=this;d.a.delete("sala/"+this.sala.id).then((function(){e.$store.commit("setSnackbar",{text:"Uspešno ste obrisali salu",color:"success"}),e.$emit("del-sala",e.sala.id)})).catch((function(){e.$store.commit("setSnackbar",{text:"Sala se već koristi u pregledu",color:"error"})}))},otvoriDialog:function(){this.$emit("otvori",this.sala.id)}},components:{Kalendar:C}},E=D,F=a("169a"),I=Object(h["a"])(E,i,s,!1,null,null,null),M=I.exports;g()(I,{VBtn:k["a"],VCard:_["a"],VDialog:F["a"],VIcon:S["a"]});var N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-form",{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-text-field",{attrs:{rules:e.nazivRules,label:"Naziv",required:""},model:{value:e.sala.naziv,callback:function(t){e.$set(e.sala,"naziv",t)},expression:"sala.naziv"}}),a("v-btn",{staticClass:"mr-4",attrs:{disabled:!e.valid,color:"success"},on:{click:e.izmeniSalu}},[e._v(" Izmeni salu ")])],1)},R=[],B=a("a18c"),L={name:"IzmenaSale",props:["sala"],data:function(){return{valid:!0,nazivRules:[function(e){return!!e||"Naziv je obavezno polje"}]}},methods:{izmeniSalu:function(e){var t=this;e.preventDefault(),d.a.put("sala/"+this.sala.id,this.sala).then((function(){t.$store.commit("setSnackbar",{text:"Sala je uspešno izmenjena",color:"success"}),B["a"].go()})).catch((function(){t.$store.commit("setSnackbar",{text:"Sala ima zauzet termin",color:"error"}),t.$emit("zatvori")}))}}},P=L,H=a("4bd4"),K=a("8654"),Y=Object(h["a"])(P,N,R,!1,null,null,null),J=Y.exports;function U(e){var t,a=Object(r["a"])(e);try{for(a.s();!(t=a.n()).done;){var n,l=t.value,o=Object(r["a"])(l.posete);try{for(o.s();!(n=o.n()).done;){var i=n.value;i.start=Z(i.start),i.end=Z(i.end)}}catch(s){o.e(s)}finally{o.f()}}}catch(s){a.e(s)}finally{a.f()}return e}function Z(e){return e.substring(0,10)+" "+e.substring(11,16)}g()(Y,{VBtn:k["a"],VForm:H["a"],VTextField:K["a"]});var q={data:function(){return{sale:[],dialog:!1,dialogSala:null,search:"",pregled:{lekar:null},lekari:[],pocetak:null,kraj:null}},mounted:function(){var e=this,t=this.$route.params.id;d.a.get("sala/DTO").then((function(t){e.sale=U(t.data),console.log(t)})).catch((function(){e.sale=[{posete:[],sala:{id:"1",naziv:"Neka klinika"}}]})),void 0!==t&&d.a.get("admin/zahtevi/"+t).then((function(t){e.pregled=t.data,console.log(t),d.a.get("lekar").then((function(t){for(var a in e.lekari=t.data,e.lekari)if(e.lekari[a].id==e.pregled.lekar.id){e.lekari[a]=e.pregled.lekar;break}console.log(t)})).catch((function(){e.lekari=[{ime:"pera",prezime:""}]}))})).catch((function(){e.sale=[{posete:[],sala:{id:"1",naziv:"Neka klinika"}}]}))},components:{Sala:M,IzmenaSale:J},computed:{filterSale:function(){var e=this;return this.sale.filter((function(t){return!!t.sala.naziv.match(e.search)||t.sala.id==e.search}))}},methods:{deleteSala:function(e){this.sale=this.sale.filter((function(t){return t.sala.id!==e}))},otvoriDialog:function(e){var t=this;if(null==this.pregled.lekar)this.dialogSala=Object(o["a"])({},this.sale.filter((function(t){return t.sala.id===e}))[0].sala),this.dialog=!0;else{var a=this.sale.find((function(t){return t.sala.id==e}));console.log(a),this.pregled.sala=a.sala;var n=this.$route.params.id;d.a.put("admin/zahtevi/"+n,this.pregled).then((function(e){console.log(e),t.$store.commit("setSnackbar",{text:"Termin je uspesno zakazan",color:"success"}),t.$router.go("/sale")})).catch((function(e){console.log(e),t.$store.commit("setSnackbar",{text:"Termin je zauzet",color:"error"})}))}}}},A=q,G=a("b974"),Q=a("1f4f"),W=Object(h["a"])(A,n,l,!1,null,null,null);t["default"]=W.exports;g()(W,{VBtn:k["a"],VCard:_["a"],VCardTitle:x["c"],VDialog:F["a"],VSelect:G["a"],VSimpleTable:Q["a"],VTextField:K["a"]})}}]);
//# sourceMappingURL=chunk-00a24499.25fc8ab0.js.map